<h1><%= @author.first_name %> <%= @author.last_name %> </h1>
<p><%= @author.email %></p>
<p><%= pluralize @author.articles.count, "article" %> :</p>

<ul>
  <% @author.articles.each do |article| %>
    <li><%= link_to article.title, polymorphic_path([namespace, article]) %></li>
  <% end %>
</ul>


<% if policy(@author).new_article? %>
  <%= link_to "New article", polymorphic_path([namespace, @author, Article]), class: "btn btn-primary"   %>
<% end %>
<%= link_to "Delete my profile", polymorphic_path([namespace, @author]), class: "btn btn-danger", data: {turbo_method: :delete, turbo_confirm: "Are you sure?"} if policy(@author).destroy?%>

<hr>
<div>
  <p>Comments : </p>
    <ul>
    <% @author.comments.includes(:user).each do |comment| %>
      <li><%= comment.content %> - <%= comment.user.full_name %> &nbsp <%= link_to "ðŸ—‘", polymorphic_path([namespace, @author, comment]), data: {turbo_method: :delete} if policy(comment).destroy? %></li>
      <% end %>
    </ul>
</div>
<div>
  <%= render "#{namespace}/comments/form", author: @author, comment: @comment %>
</div>

<%= link_to "All articles", polymorphic_path([namespace, Article])  %>
